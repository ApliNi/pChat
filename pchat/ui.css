
@font-face {
	font-family: 'HarmonyOS';
	src: url('./res/HarmonyOS_Sans_SC_Medium.subset.woff2') format('woff2');
	font-display: swap;
}

@font-face {
	font-family: 'JetBrainsMono';
	src: url('./res/JetBrainsMono-Regular.woff2') format('woff2');
	font-display: swap;
}

@font-face {
	font-family: 'Ubuntu';
	src: url('./res/Ubuntu-Regular.subset.woff2') format('woff2'),
		local('JetBrainsMono');
	word-spacing: -5px; /*等宽空格间距太大*/
	font-display: swap;
}

:root {
	--bg-color: #0d0d0d;
	--sidebar-bg: #0a0a0a;
	--text-color: #e0e0e0;
	--border-color: #333;
	--user-msg-color: #00ff00;
	--ai-msg-color: #747474;
	--sys-msg-color: #00ccff;
	--meta-color: #848484;
	--danger-color: #ff3333;
	--active-item-bg: #161616;
	--font-stack: 'JetBrainsMono', 'HarmonyOS', 'Segoe UI Emoji', 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
}

@keyframes enterScale { from { transform: scale(1.1); } to { transform: scale(1); } }
@keyframes enterOpacity { from { opacity: 0; } to { opacity: 1; } }
@keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: 0; } }
@keyframes blink { 50% { opacity: 0; } }

* { box-sizing: border-box; margin: 0; }

html {
	background-color: var(--bg-color);
}

body {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: var(--bg-color);
	color: var(--text-color);
	font-family: var(--font-stack);
	/* height: 100vh; */
	display: flex !important;
	flex-direction: column;
	font-size: 13px;
	overflow: hidden;
	tab-size: 4;
	transform-origin: 50% 50%;
	animation: enterScale 0.6s ease;
}
body > * {
	animation: enterOpacity 1.6s ease;
}

@view-transition {
	navigation: auto;
}

/* --- Global Header --- */
header {
	border-bottom: 1px solid var(--border-color);
	padding: 0 15px;
	display: flex;
	justify-content: space-between;
	align-items: center;
	background: #000;
	flex-shrink: 0;
	height: 45px;
}

h1 { font-size: 14px; font-weight: normal; letter-spacing: 1px; color: #fff; font-family: 'Ubuntu', 'HarmonyOS'; }

.header-controls { display: flex; align-items: center; gap: 15px; margin-left: 15px; }

.model-select-wrapper { position: relative; }
.model-select-wrapper::after {
	content: '▼'; font-size: 10px; position: absolute; right: 8px; top: 50%;
	transform: translateY(-50%); pointer-events: none; color: var(--meta-color);
}

#model-select {
	appearance: none; -webkit-appearance: none;
	background: #000; color: var(--text-color);
	border: 1px solid var(--border-color);
	padding: 4px 25px 4px 10px;
	font-family: var(--font-stack); font-size: 12px;
	cursor: pointer; outline: none; border-radius: 0;
	text-transform: uppercase;
	width: 300px;
	min-width: 100px;
	transition: all 0.3s;
}
#model-select:hover { border-color: #fff; }

.status-dot {
	height: 8px; min-width: 8px; max-width: 8px; background: #333; transition: all 0.3s;
}
.status-dot.active {
	background: var(--user-msg-color); box-shadow: 0 0 8px var(--user-msg-color);
}

/* --- Chat Container --- */
#chat-container {
	flex: 1;
	display: flex;
	overflow: hidden;
	position: relative;
}

/* --- Sidebar --- */
#sidebar {
	width: 240px;
	background: var(--sidebar-bg);
	border-right: 1px solid var(--border-color);
	display: flex;
	flex-direction: column;
	flex-shrink: 0;
	font-size: 12px;
}

.sidebar-header {
	padding: 10px;
	border-bottom: 1px solid #1a1a1a;
	text-align: center;
}

#new-chat-btn {
	background: transparent;
	color: #666;
	border: 1px dashed #333;
	width: 100%;
	padding: 8px;
	font-family: var(--font-stack);
	font-size: 11px;
	cursor: pointer;
	text-transform: uppercase;
	transition: all 0.2s;
}
#new-chat-btn:hover {
	color: #fff;
	border-color: #666;
	background: rgba(255,255,255,0.05);
}

#history-list {
	flex: 1;
	overflow-y: auto;
	padding: 10px 0 0 0;
	content-visibility: auto;
}

/* 侧边栏会话分组 */
.history-group {
	margin-bottom: 10px;
}

.history-group-title {
	padding: 5px 10px 5px 15px;
	font-size: 11px;
	font-weight: bolder;
	color: var(--meta-color);
	margin: 0 8px 10px 8px;
	background: rgb(255 255 255 / 5%);
	transition: margin 0.2s;
}

.history-group:not(:open) > .history-group-title {
	margin-bottom: 0;
}

/* [新增] 侧边栏底部样式 */
.sidebar-footer {
	padding: 10px;
	border-top: 1px solid #1a1a1a;
	display: flex;
	gap: 5px;
	background: var(--sidebar-bg);
	flex-shrink: 0; /* 防止被压缩 */
}

.sidebar-footer button {
	flex: 1;
	background: transparent;
	color: #666;
	border: 1px solid #333;
	padding: 6px;
	font-family: var(--font-stack);
	font-size: 10px;
	cursor: pointer;
	transition: all 0.2s;
}

.sidebar-footer button:hover,
.sidebar-footer button.open {
	color: #fff;
	border-color: #666;
	background: rgba(255,255,255,0.05);
}

.history-item {
	padding: 10px 10px 10px 15px;
	cursor: pointer;
	border-left: 2px solid transparent;
	display: flex;
	justify-content: space-between;
	align-items: center;
	transition: background 0.2s;
	color: #888;
	animation: fadeIn 0.3s ease;
}

.history-item:hover { background: #111; color: #ccc; }
.history-item.active {
	background: var(--active-item-bg);
	border-left-color: var(--user-msg-color);
	color: #fff;
}

.history-info { flex: 1; overflow: hidden; }
.history-title {
	white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
	margin-bottom: 3px; border: 1px solid transparent;
	padding: 2px;
}
/* Editable Title Style */
.history-title[contenteditable="plaintext-only"] {
	background: #000;
	color: #fff;
	border: 1px dashed #555;
	cursor: text;
	outline: none;
}

.history-date { font-size: 10px; color: #444; font-family: sans-serif; }

.history-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	background: transparent;
	border: none;
	color: #444;
	cursor: pointer;
	width: 25px;
	height: 25px;
	font-size: 14px;
	line-height: 0;
	padding: 5px;
	opacity: 0;
	transition: all 0.2s;
}
.history-item.active .history-btn { opacity: 0.7; }
.history-item:hover .history-btn { opacity: 1; }
.history-del-btn::after { content: "×"; font-size: 16px; }
.history-del-btn:hover { color: var(--danger-color); }
.history-pin-btn::after { content: "⇵"; font-size: 12px; font-weight: bolder; }
.history-pin-btn.pinned { opacity: 1 !important; color: var(--meta-color); }
.history-pin-btn:hover { color: var(--sys-msg-color); }

/* --- Right Panel --- */
#right-panel {
	flex: 1;
	display: flex;
	flex-direction: column;
	min-width: 0;
	position: relative;
	overflow-y: scroll;
	background: var(--bg-color);
}

.message-area {
	flex: 1;
	padding: 20px 20px 0px 20px;
	display: flex;
	flex-direction: column;
	gap: 20px;
	scroll-target-group: auto;
}

.message {
	max-width: 800px;
	width: 100%;
	margin: 0 auto;
	padding: 10px 15px;
	border-left: 2px solid transparent;
	position: relative;
	display: flex;
	flex-direction: column;
	transition: all 0.2s;
	content-visibility: auto;
	animation: fadeIn 0.3s ease;
}
.message:last-child {
	content-visibility: visible !important;
	contain: none !important;
}

.message.user { border-left-color: var(--user-msg-color); background: rgba(0, 255, 0, 0.02); }
.message.assistant { border-left-color: var(--ai-msg-color); background: rgba(255, 255, 255, 0.02); }
.message.system { border-left-color: var(--sys-msg-color); background: rgba(0, 204, 255, 0.02); }

.message.highlight {
	/* background: rgba(255, 255, 255, 0.1); */
	filter: brightness(150%);
}

/* 同样为不同角色的底部栏提供微调背景（可选，建议与 Header 保持一致） */
.message.user .role-label, .message.user .msg-footer {
	background: rgba(13, 20, 13, 0.95);
}
.message.assistant .role-label, .message.assistant .msg-footer {
	background: rgba(20, 20, 20, 0.95);
}
.message.system .role-label, .message.system .msg-footer {
	background: rgba(13, 20, 25, 0.95);
}

.role-label {
	position: sticky;
	top: -1px;
	z-index: 100;
	background: rgba(13, 13, 13, 0.95);
	backdrop-filter: blur(5px);
	border-bottom: 1px solid rgba(255, 255, 255, 0.05);
	
	margin: -10px -15px 21px -15px; /* 抵消 .message 的 padding */
	padding: 8px 15px;
	
	font-size: 10px;
	opacity: 0.95;
	display: flex;
	justify-content: space-between;
	align-items: center;
	text-transform: uppercase;
	font-weight: bold;
	letter-spacing: 0.5px;
}

.role-label + * {
	margin-top: -8px;
}

.content {
	word-break: break-all; margin-bottom: 6px;
	outline: none; transition: background 0.2s; background: rgba(255,255,255,0);
}
.content:focus { background: rgba(255,255,255,0.03); }

/* 头部按钮组，让折叠按钮和RAW按钮排在一起 */
.role-header-right {
	display: flex;
	gap: 10px;
	align-items: center;
}

/* 折叠后的内容样式 */
.content.collapsed {
	height: 19px;
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
	opacity: 0.5;
	cursor: pointer;
}

/* 确保折叠时内部元素不破坏布局 */
.content.collapsed * {
	display: inline;
	margin: 0;
	white-space: nowrap;
}
.content.collapsed pre {
	display: block;
}
.content.collapsed ul,
.content.collapsed ol {
    padding-left: 0;
}
.content.collapsed > details.think.__pChat__ {
	display: none;
}

.msg-footer {
	/* 视觉样式：背景、模糊、边框 */
	background: rgba(13, 13, 13, 0.95);
	backdrop-filter: blur(5px);
	border-top: 1px solid rgba(255, 255, 255, 0.05);
	
	margin: 7px -15px -10px -15px; /* 上边距留出一点空间，下/左/右抵消 padding */
	padding: 6px 15px;             /* 重新补回内边距 */

	display: flex;
	justify-content: space-between;
	align-items: center;
	min-height: 32px;
}

/* 修正：在吸附状态下，确保统计文字不会太暗 */
.meta-stats {
	font-size: 9px;
	color: #666; /* 稍微调亮一点，原来的 #444 在有背景时可能看不清 */
	text-align: right;
}

.left-actions { display: flex; gap: 8px; }
.action-btn {
	background: transparent; border: none;
	font-family: var(--font-stack); font-size: 9px;
	cursor: pointer; padding: 0;
	transition: all 0.2s; text-transform: uppercase;
	color: var(--meta-color);
}
.action-btn:hover { opacity: 1; }
.action-btn:hover { color: #fff; }
.btn-del.confirm-state { color: var(--danger-color); font-weight: bold; opacity: 1; }

.meta-stats { font-size: 9px; color: var(--text-color); text-align: right; min-height: 14px; }

/* --- Input Area --- */
#input-container {
	position: sticky;
	bottom: 0;
	left: 0;
	right: 0;
	z-index: 300;
	flex-shrink: 0;
	padding: 20px 20px 40px 20px;
	background: var(--bg-color);
	outline: 1px solid var(--bg-color);
	margin-top: auto;
}

/* 粘贴图片的预览容器 */
.image-preview-container, .preview-content {
	max-width: 800px;
	width: 100%;
	margin-left: auto;
	margin-right: auto;
	display: flex;
	flex-wrap: wrap;
	gap: 10px;
}

.image-preview-container:has(.preview-item),
.preview-content:has(.preview-item) {
	margin-bottom: 10px;
}

/* 预览条目：半透明绿 + 虚线边框 */
.preview-item {
	display: flex;
	align-items: center;
	background: rgba(0, 255, 0, 0.05);
	border: 1px dashed var(--user-msg-color);
	width: calc(20% - 0.8 * 10px);
	padding: 5px;
	gap: 4px;
	animation: fadeIn 0.2s ease;
}

.preview-item img {
	min-width: 24px;
	max-width: 24px;
	min-height: 24px;
	max-height: 24px;
	object-fit: cover;
	border: 1px solid var(--user-msg-color);
}

.preview-item .file-info {
	font-family: var(--font-stack);
	font-size: 10px;
	padding-left: 5px;
	width: 100%;
	color: var(--user-msg-color);
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.preview-item .remove-img {
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	color: var(--meta-color);
	line-height: 0;
	font-weight: bold;
	height: 100%;
	padding: 5px;
	transition: all 0.2s;
}
.preview-item .remove-img:hover {
	color: var(--danger-color);
}

.input-group {
	max-width: 800px;
	margin: 0 auto;
	display: flex;
	border: 1px solid var(--border-color);
	position: sticky;
	animation: fadeIn 0.3s ease;
}
.input-group::before {
	content: "";
	position: absolute;
	top: -0.3px;
	left: -1px;
	bottom: -0.3px;
	width: 2px;
	background-color: var(--user-msg-color);
	opacity: 0.85;
}

#user-input {
	flex: 1;
	background: #000;
	color: var(--text-color);
	border: none;
	padding: 12px;
	font-family: var(--font-stack);
	font-size: 0.86rem; /* 比 0.875rem 小一点, 防止移动端显示滚动条 */
	resize: none;
	field-sizing: content;
	min-height: 42px;
	max-height: 200px;
	outline: none;
}

#send-btn {
	width: 83px;
	background: #111; color: var(--text-color);
	border: none; border-left: 1px solid var(--border-color);
	padding: 0 25px; font-family: var(--font-stack);
	cursor: pointer; font-weight: bold; text-transform: uppercase;
	transition: all 0.2s;
}
#send-btn:hover { background: rgba(255, 255, 255, 0.05); color: #fff; }
#send-btn:disabled { background: #111; color: #444; cursor: not-allowed; }

#attached-image-btn {
	position: absolute;
	top: 6px;
	right: 96px;
	background: #000000cc;
	color: #fff;
	opacity: 0.6;
	border: none;
	padding: 7px;
	font-family: var(--font-stack);
	cursor: pointer;
	font-weight: bold;
	transition: all 0.2s;
	line-height: 0;
}
#attached-image-btn:hover { opacity: 1; }

.message.isProcessing .content::after {
	content: '█';
	animation: blink 1s step-end infinite;
	margin-left: 2px;
	color: var(--ai-msg-color);
}

/* --- Minimap (Right Sidebar) --- */
#minimap {
	width: 70px;
	background: transparent;
	opacity: 0.85;
	display: flex;
	flex-direction: column;
	flex-shrink: 0;
	overflow-y: auto;
	padding: 10px 8px;
	/* gap: 6px; */
	position: absolute;
	right: 7px;
	top: 0;
	bottom: 0;
	z-index: 300;
	transition: right 0.3s;
	pointer-events: none;
	scroll-target-group: auto;
}

/* 隐藏滚动条但保留功能 */
#minimap::-webkit-scrollbar { width: 0; }

.minimap-item {
	width: 100%;
	padding-bottom: 5px;
	cursor: pointer;
	transition: all 0.2s;
	position: relative;
	pointer-events: all;
	text-decoration: none;
}
.minimap-item::after {
	content: "";
	display: flex;
	align-items: center;
	justify-content: flex-end;
	color: var(--meta-color);
	height: 12px;
	background: rgba(255, 255, 255, 0.03);
	border-left: 3px solid transparent;
	transition: all 0.2s;
	animation: fadeIn 0.3s ease;
}
.minimap-item:target-current::after {
	border-left: 11px solid transparent;
}

.minimap-item:hover::after {
	filter: brightness(130%);
}

.minimap-item.collapsed::after {
	content: "-";
	opacity: 0.35 !important;
}

/* 颜色映射，与主界面一致 */
.minimap-item.user::after { border-left-color: var(--user-msg-color); background: rgba(0, 255, 0, 0.05); }
.minimap-item.assistant::after { border-left-color: var(--ai-msg-color); background: rgba(255, 255, 255, 0.05); }
.minimap-item.system::after { border-left-color: var(--sys-msg-color); background: rgba(0, 204, 255, 0.05); }

::-webkit-scrollbar { width: 7px; height: 7px; }
::-webkit-scrollbar-track { background: #000; }
::-webkit-scrollbar-thumb { background: #333; }
::-webkit-scrollbar-thumb:hover { background: #555; cursor: default; }
::-webkit-scrollbar-corner { background: #333; }

::selection { background: #34beff33; }

.preview-content {
	margin-left: 0;
	/* margin-right: 0; */
}

/* --- Compact Terminal Markdown Style --- */
.markdown-body {
	font-family: var(--font-stack);
	color: var(--text-color);
	background: transparent;
	word-wrap: break-word;
}

.markdown-body details {
	padding: 10px;
	transition: all 0.2s;
	cursor: pointer;
}
.markdown-body details summary {
	cursor: pointer;
	user-select: none;
}
.markdown-body details:open {
	background-color: rgba(255,255,255,0.05);
	margin-bottom: 14px;
	cursor: default;
}
.markdown-body details:open + * {
	margin-top: 0;
}
.markdown-body details.think summary {
	color: var(--sys-msg-color);
	font-weight: bold;
}

/* 标题：大幅减小间距，使用更细腻的下划线 */
.markdown-body h1, .markdown-body h2, .markdown-body h3,
.markdown-body h4, .markdown-body h5, .markdown-body h6 {
	font-weight: bold;
	color: #fff;
	border-bottom: 1px solid #333; /* 实线比虚线更干净 */
	padding-bottom: 4px;
	line-height: 1.3;
	margin: 1.4em 0 0.5rem 0;
}

/* 稍微区分一下标题等级 */
.markdown-body h1 { font-size: 1.3em; border-bottom-color: #555; }
.markdown-body h2 { font-size: 1.15em; }
.markdown-body h3 { font-size: 1.1em; border: none; }
.markdown-body h4 { font-size: 1em; border: none; }

.markdown-body.collapsed h1,
.markdown-body.collapsed h2 {
	border: none;
}

.markdown-body p {
	margin: 0.8em 0;
}

.markdown-body img,
.markdown-body video {
	max-width: 100%;
}

.markdown-body iframe {
	max-width: 100%;
	border: none;
}

/* 列表：紧凑布局 */
.markdown-body ul, .markdown-body ol {
	padding-left: 25px;
	width: 100%;
}

/* 列表项之间不要有太大空隙，但保留一点点呼吸感 */
.markdown-body li {
	margin: 0.4rem 0;
	width: 100%;
}

.markdown-body li::marker {
	color: var(--meta-color);
}

.markdown-body ul > li::marker {
	font-size: initial;
}

.markdown-body li > p {
	margin: 4px 0;
}

/* 嵌套列表更紧凑 */
.markdown-body ul ul, .markdown-body ul ol,
.markdown-body ol ul, .markdown-body ol ol {
	margin-top: 4px;
}

.markdown-body hr {
	height: 0;
	margin: 15px 0;
	border: none;
	border-top: 1px dashed #333;
}

.markdown-body.collapsed hr,
.markdown-body.collapsed br {
	display: none;
}

.markdown-body hr:has(+ table),
.markdown-body table + hr,
.markdown-body hr:has(+ pre),
.markdown-body pre + hr {
	display: none;
}

/* 引用块：更融合背景 */
.markdown-body blockquote {
	margin: 14px 0;
	padding: 4px 12px;
	width: 100%;
	color: #888;
	border-left: 3px solid #444;
	background: rgba(255,255,255,0.03);
}

/* 链接 */
.markdown-body a {
	color: var(--sys-msg-color);
	text-decoration: none;
	border-bottom: none;
}

/* 表格 */
.markdown-body table {
	border-collapse: collapse;
	width: 100%;
	margin: 10px 0;
	font-size: 12px;
}
.markdown-body table tr th, .markdown-body table tr td {
	background-color: transparent;
	transition: all 0.2s;
}
.markdown-body table tr:hover th, .markdown-body table tr:hover td {
	background-color: #1b1b1b;
}
.markdown-body table th, .markdown-body table td {
	border: none;
	padding: 6px 8px; /* 减小单元格内边距 */
}
.markdown-body table > thead > tr > th {
	border-top: 2px solid #333;
	border-bottom: 1px solid #333;
	font-weight: bold;
}
.markdown-body table > tbody > tr:last-child > td {
	border-bottom: 2px solid #333;
}

/* --- 代码样式优化 --- */

/* 行内代码：更像高亮笔，而不是方块 */
.markdown-body :not(pre) > code {
	font-family: var(--font-stack);
	background: rgba(255, 204, 0, 0.1); /* 极淡的琥珀色背景 */
	color: #ffcc00; /* 琥珀色文字 */
	padding: 0 4px;
	border-radius: 2px;
	font-size: 0.95em;
	user-select: all;
}

/* 代码块：深色背景，无圆角 */
.markdown-body pre {
	background: #0c0c0ce0;
	border: 1px solid var(--border-color);
	padding: 10px;
	border-radius: 0px;
	overflow-x: auto;
	overflow-y: auto;
	margin: 0.8em 0;
	max-height: 444px;
	outline: none;
}

.markdown-body pre code {
	background: transparent;
	padding: 0;
	color: inherit;
	white-space: pre;
	font-size: 12px; /* 代码稍微小一点 */
}

.markdown-body input[type="checkbox"] {
	appearance: none;
	border-radius: 0;
	width: 12px;
	height: 12px;
	margin-bottom: -1px !important;
	border: 2px double var(--meta-color);
}
.markdown-body input[type="checkbox"]:checked { border: 6px double var(--meta-color); }

/* 最后一个元素不添加 margin-bottom */
.markdown-body > *:last-child,
.markdown-body ul > li:last-child,
.markdown-body ol > li:last-child,
.markdown-body li > *:last-child,
.markdown-body details > *:last-child {
	margin-bottom: 0 !important;
}
.markdown-body > *:first-child {
	margin-top: 0 !important;
}

.hljs { color: #e5e5e5; }

.hljs-comment, .hljs-quote { color: #7e7e7e; }

.hljs-deletion, .hljs-name, .hljs-regexp, .hljs-selector-class, .hljs-selector-id, .hljs-tag, .hljs-template-variable, .hljs-variable { color: #ffa07a; }

.hljs-built_in, .hljs-link, .hljs-literal, .hljs-meta, .hljs-number, .hljs-params, .hljs-type { color: #f5ab35; }

.hljs-attribute { color: gold; }

.hljs-addition, .hljs-bullet, .hljs-string, .hljs-symbol { color: #abe338; }

.hljs-function, .hljs-section, .hljs-title { color: #01e2e2; }

.hljs-keyword, .hljs-operator, .hljs-selector-tag { color: #d2a7da; }

.hljs-punctuation { color: #abb2bf; }

.hljs-emphasis { font-style: italic; }

.hljs-strong { font-weight: 700; }

/* --- CSS Only Mobile Menu --- */

/* 默认隐藏菜单按钮 */
.menu-btn {
	display: none;
	font-size: 20px;
	padding: 0 5px;
	margin-left: -5px;
	color: #fff;
	cursor: pointer;
	user-select: none;
}

/* .config {

} */

.config button {
	background: transparent;
	border: none;
	cursor: pointer;
	padding: 0;
	font-family: var(--font-stack);
	transition: all 0.2s;
	text-transform: uppercase;
	color: var(--sys-msg-color);
}
/* .config button:hover {
	color: #fff;
} */

.config details.model-service {
	position: relative;
}

.config details.model-service summary::after {
	content: '[OFF]';
	color: var(--meta-color);
	padding-right: 10px;
	position: absolute;
	right: 0;
}
.config details:open.model-service summary::after {
	content: '[ON]';
	color: var(--user-msg-color);
}

.config p:has(input) {
	display: flex;
	align-items: center;
	gap: 10px;
}

.config input {
	appearance: none;
	-webkit-appearance: none;
	background: #0c0c0ce0;
	color: var(--text-color);
	border: 1px solid var(--border-color);
	padding: 4px 10px;
	font-family: var(--font-stack);
	font-size: 12px;
	outline: none;
	flex: 1;
	width: 100%;
	min-width: 100px;
}

.config table.input-config-table tr > td:first-child {
	width: 130px;
}
.config table.input-config-table td,
.config table.input-config-table th {
	border: 0 !important;
	padding: 2px 0;
}

.config #openaiApiKeyInput {
	-webkit-text-security: disc;
}
.config #openaiApiKeyInput:focus {
	-webkit-text-security: none;
}

#sidebar .sidebar-header,
#sidebar #history-list {
	transition: opacity 0.2s;
}
#sidebar.open-config .sidebar-header,
#sidebar.open-config #history-list {
	opacity: 0.6;
}

#image {
	position: fixed;
	top: 0;
	bottom: 0;
	left: 0;
	right: 0;
	z-index: 2000;
	line-height: 0;
	background-color: #00000000;
	user-select: none;
	opacity: 0;
	pointer-events: none;
	transition: all 0.2s ease;
}
#image > img {
	max-width: 80%;
	height: fit-content;
	position: absolute;
	-webkit-user-drag: none;
	transition: transform 0.4s ease, top 0.4s ease, left 0.4s ease, opacity 0.4s ease;
	transform: scale(1);
	opacity: 0;
}
#image.open {
	opacity: 1;
	background-color: #00000078;
	pointer-events: all;
}
#image.open > img {
	opacity: 1;
}

@media (max-width: 1200px) {
	.menu-btn {
		display: block;
		transition: all 0.2s;
	}

	#sidebar {
		position: absolute;
		left: -300px;
		z-index: 1000;
		width: 240px;
		height: 100%;
		box-shadow: 10px 0 20px rgba(0,0,0,0.8);
		transition: left 0.3s;
	}
	#sidebar-toggle:checked ~ #chat-container #sidebar {
		left: 0;
	}
	#sidebar-toggle:checked ~ header .menu-btn {
		transform: rotate(-180deg);
	}

	header h1 { display: none; }

	#model-select { width: 100%; }
}

@media (max-width: 970px) {
	#minimap {
		right: -100px;
	}
	#sidebar-toggle:checked ~ #chat-container #minimap {
		right: 7px;
	}

	#input-container {
		padding: 20px;
	}
}

@media (max-width: 730px) {
	/* 当 .preview-item 宽度 >= 默认宽度的 * 0.85 (123.25) 时压缩  */
	.preview-item {
		width: calc(25% - 0.75 * 10px);
	}
}

@media (max-width: 600px) {
	.preview-item {
		width: calc(33.33333% - 0.6666666 * 10px);
	}
}

@media (max-width: 465px) {
	.preview-item {
		width: calc(50% - 0.5 * 10px);
	}
}

@media (max-width: 334px) {
	.preview-item {
		width: 100%;
	}
}

@media (min-width: 1200px) {
	#right-panel {
		padding-right: 40px;
	}
}

@media (min-width: 1450px) {
	#right-panel {
		padding-right: 100px;
	}
}

@media (min-width: 1650px) {
	#right-panel {
		padding-right: 200px;
	}
}
